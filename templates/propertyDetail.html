<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Detalle de la Propiedad</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" />
    <nav>
        <ul class="flex space-x-4">
            <a class="hover:underline" href="{{ url_for('index') }}">
                Inicio
               </a>
            <li><a class="hover:underline" href="{{ url_for('catalogo') }}">Catálogo</a></li>
            {% if not session.get('logged_in') %}
                <li><a class="hover:underline" href="{{ url_for('login') }}">Iniciar Sesión</a></li>
            {% endif %}
            <!-- Este botón solo será visible si el usuario ha iniciado sesión -->
            {% if session.get('logged_in') %}
                <li><a class="hover:underline" href="/adminis">Admin</a></li>
            {% endif %}
            <!-- Dentro de la navegación de index.html -->
            {% if session.get('logged_in') %}
            <li><a class="hover:underline" href="/logout">Cerrar Sesión</a></li>
            {% endif %}
            <div class="flex justify-end space-x-4 mt-6">
                {% if session.get('logged_in') %}
                    <a href="{{ url_for('edit_property', property_id=property.id) }}" 
                       class="px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600">
                       Editar
                    </a>
                    <form action="{{ url_for('delete_property', property_id=property.id) }}" method="POST" onsubmit="return confirm('¿Estás seguro de que deseas eliminar esta propiedad?')">
                        <button type="submit" 
                                class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">
                                Eliminar
                        </button>
                    </form>
                {% endif %}
            </div>            
        </ul>
    </nav>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto mt-12">
        <div class="bg-white shadow-md rounded-lg p-6">
            <h1 class="text-3xl font-bold mb-4">{{ property.name }}</h1>
            <div class="flex flex-col md:flex-row items-start md:items-center">
                {% if property.main_image %}
                <img src="{{ url_for('static', filename=property.main_image.split('static/')[-1]) }}" 
                    alt="Imagen principal de {{ property.name }}" 
                    class="w-full md:w-1/2 rounded-md shadow-lg mb-4 md:mb-0 md:mr-6" />
                {% else %}
                <img src="https://via.placeholder.com/600x400" 
                    alt="Imagen no disponible" 
                    class="w-full md:w-1/2 rounded-md shadow-lg mb-4 md:mb-0 md:mr-6" />
                {% endif %}

                <div class="flex-1">
                    <p><strong>Ubicación:</strong> {{ property.location }}</p>
                    <p><strong>Precio:</strong> ${{ property.price }}</p>
                    <p class="mt-4">{{ property.description }}</p>
                </div>
                <!-- Galería de imágenes de repertorio -->
                {% if property.repertory_images %}
                <div class="flex space-x-4 mt-4">
                    {% for image in property.repertory_images.split(',') %}
                    <img src="{{ url_for('static', filename=image.split('static/')[-1]) }}" 
                        alt="Imagen adicional de {{ property.name }}" 
                        class="w-32 h-32 rounded-md shadow-lg" />
                    {% endfor %}
                </div>
                {% endif %}           
            </div>
            <a href="{{ url_for('catalogo') }}" class="mt-6 inline-block text-blue-500 hover:underline">Volver al Catálogo</a>
        </div>
    </div>
</body>
</html>


